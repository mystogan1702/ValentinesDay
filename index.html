<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíñ photo match ¬∑ flying hearts ¬∑ proposal üíñ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Poppins', system-ui, sans-serif;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(145deg, #ffdde1 0%, #fbc9db 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            overflow-x: hidden;
            position: relative;
        }

        .stage {
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 30;
        }

        /* ----- GAME 1 : moving hearts (CONTAINED) ----- */
        .game-panel {
            background: rgba(255, 245, 250, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 70px;
            padding: 2rem 1.5rem;
            box-shadow: 0 30px 40px #ffa5c0, 0 0 0 8px white inset;
            border: 4px solid white;
            width: 100%;
            text-align: center;
        }

        .game-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #ffeaf2;
            padding: 1rem 2rem;
            border-radius: 60px;
            margin-bottom: 1.5rem;
            border: 3px solid white;
            font-size: 1.7rem;
            font-weight: bold;
            color: #b33f69;
        }

        .counter-box {
            background: white;
            border-radius: 40px;
            padding: 0.5rem 2rem;
            box-shadow: 0 0 0 3px #ffb0cb;
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }

        /* HEART CONTAINER with overflow hidden */
        .moving-area {
            background: #ffeef4;
            border-radius: 70px;
            padding: 1.8rem 1.2rem;
            border: 5px dashed white;
            min-height: 380px;
            height: 380px;
            position: relative;
            margin-bottom: 1.5rem;
            overflow: hidden;           /* hearts stay inside */
            box-shadow: inset 0 0 30px #ffc0d5;
        }

        .moving-heart {
            font-size: 3.2rem;
            cursor: pointer;
            user-select: none;
            filter: drop-shadow(0 8px 8px #f78aaa);
            position: absolute;          /* absolutely positioned inside container */
            transition: transform 0.1s;
            will-change: transform;
        }

        .moving-heart:active {
            transform: scale(1.2);
        }

        .moving-heart.caught {
            opacity: 0.15;
            pointer-events: none;
            filter: grayscale(0.6);
            transition: 0.3s;
        }

        .game-message {
            background: #ffe2f0;
            border-radius: 40px;
            padding: 1rem 1.8rem;
            font-size: 1.4rem;
            color: #972b59;
            border: 3px solid white;
            margin: 1rem 0 1.2rem;
            font-weight: 600;
        }

        .surprise-btn {
            background: #ff98ba;
            border: none;
            font-size: 2rem;
            font-weight: 700;
            padding: 1rem 2.5rem;
            border-radius: 60px;
            border: 5px solid white;
            box-shadow: 0 12px 0 #b34d73;
            color: white;
            text-shadow: 3px 3px 0 #b3406a;
            cursor: pointer;
            margin: 0.5rem 0 1rem;
            transition: 0.08s linear;
            width: fit-content;
        }
        .surprise-btn:active { transform: translateY(7px); box-shadow: 0 5px 0 #b34d73; }
        .surprise-btn:disabled {
            opacity: 0.4; transform: none; box-shadow: 0 8px 0 #b34d73; pointer-events: none;
        }

        /* ----- GAME 2 : memory with LOCAL IMAGES (1.jpg .. 6.jpg) ----- */
        .memory-panel {
            background: rgba(255, 240, 250, 0.95);
            backdrop-filter: blur(12px);
            border-radius: 70px;
            padding: 2rem 1.5rem;
            box-shadow: 0 30px 40px #ff9ebe, 0 0 0 8px white inset;
            border: 4px solid white;
            width: 100%;
            text-align: center;
        }
        .memory-header {
            background: #ffe6f0;
            border-radius: 60px;
            padding: 1rem 2rem;
            border: 3px solid white;
            font-size: 1.8rem;
            font-weight: bold;
            color: #b34167;
            margin-bottom: 1.5rem;
        }
        .memory-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1.2rem;
            margin: 2rem 0;
        }
        .card {
            width: 130px;
            height: 170px;
            background: #ffb7c9;
            border-radius: 30px;
            border: 5px solid white;
            box-shadow: 0 12px 0 #b34d73;
            cursor: pointer;
            transition: 0.15s;
            transform-style: preserve-3d;
            position: relative;
        }
        .card.flipped {
            transform: translateY(4px) rotateY(180deg);
        }
        .card.matched {
            opacity: 0.5;
            pointer-events: none;
            filter: grayscale(0.3);
            box-shadow: 0 6px 0 #b34d73;
            transform: translateY(4px) rotateY(180deg);
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 26px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-size: cover;
            background-position: center;
        }
        .card-back {
            background: #ffb7c9;
            font-size: 3.5rem;
            content: "‚ùì";
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .card-front {
            background: #ffeaf2;
            transform: rotateY(180deg);
        }
        .card-front img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 22px;
            border: 3px solid white;
        }
        .memory-message {
            background: #ffdeec;
            border-radius: 40px;
            padding: 1rem 1.8rem;
            font-size: 1.3rem;
            color: #972b59;
            border: 3px solid white;
            margin: 1rem 0;
        }
        .back-to-surprise-btn {
            background: #c48eb7;
            border: none;
            font-size: 1.8rem;
            padding: 1rem 2rem;
            border-radius: 60px;
            border: 5px solid white;
            box-shadow: 0 12px 0 #7f4f73;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin: 0.5rem 0;
        }
        .back-to-surprise-btn:active { transform: translateY(7px); box-shadow: 0 5px 0 #7f4f73; }
        .back-to-surprise-btn:disabled { opacity: 0.4; pointer-events: none; }

        /* ----- RING BOX ----- */
        .ring-box {
            background: rgba(255, 245, 250, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 60px 60px 40px 40px;
            padding: 2.8rem 3.5rem;
            box-shadow: 0 20px 40px #ff99bb, 0 0 0 10px white inset;
            border: 5px solid white;
            cursor: pointer;
            animation: gentle-pulse 2s infinite;
            width: fit-content;
            margin: 1rem auto;
        }
        .ring-content { display: flex; flex-direction: column; align-items: center; gap: 1.5rem; }
        .ring-emoji { font-size: 7rem; filter: drop-shadow(0 15px 10px #ff99bb); }
        .ring-label { font-size: 2.5rem; font-weight: 600; color: #b34167; text-shadow: 2px 2px 0 #ffd1df; }
        @keyframes gentle-pulse {
            0% { box-shadow: 0 20px 40px #ffb0c8, 0 0 0 10px white inset; }
            50% { box-shadow: 0 20px 60px #ff80aa, 0 0 0 16px #ffeef4 inset; }
        }

        /* ----- PROPOSAL & YES PAPER ----- */
        .proposal-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(14px);
            border-radius: 48px;
            padding: 2rem 2.2rem;
            width: 100%;
            box-shadow: 0 30px 45px #ffb6c190, 0 0 0 6px #fff9 inset;
            border: 3px solid white;
            animation: pop-in 0.4s;
            text-align: center;
        }
        @keyframes pop-in { 0% { opacity:0; transform:scale(0.7); } 100% { opacity:1; transform:scale(1); } }
        .question-big { font-size: 2.4rem; color: #b34167; margin-bottom: 1.2rem; display:flex; justify-content:center; gap:12px; }
        .heart-message { background: #feeef4; padding: 1.4rem 1.8rem; border-radius: 40px; font-size:1.3rem; color:#7d3b4f; line-height:1.5; margin:1.8rem 0 2.5rem; border: 3px dashed #ff94b6; text-align:left; }
        .button-pair { display: flex; justify-content: center; gap: 1.5rem; flex-wrap: wrap; }
        .yes-btn, .no-btn { border:none; font-size:2rem; font-weight:600; padding:0.8rem 2.2rem; border-radius:60px; cursor:pointer; box-shadow:0 10px 15px #ffa5c0; border:3px solid white; }
        .yes-btn { background:#ff80a5; color:white; text-shadow:2px 2px 0 #c43b6b; }
        .yes-btn:hover { background:#ff5f8f; transform:scale(1.07); }
        .no-btn { background:#ffe2ec; color:#ac4f73; }
        .yes-paper {
            background: #fffcf0; border-radius:30px; padding:2.2rem 2rem; box-shadow:0 15px 0 #ffadc0, 0 30px 40px rgba(255,100,150,0.3); border:10px double #ff88aa; outline:5px solid white; max-width:600px; width:100%; position:relative; animation:unfold 0.5s;
        }
        @keyframes unfold { 0%{transform:scaleY(0.2) scaleX(0.8);} 100%{transform:scaleY(1) scaleX(1);} }
        .decorations { position:absolute; top:-20px; left:-20px; right:-20px; bottom:-20px; pointer-events:none; z-index:0; }
        .flower-left { position:absolute; left:-20px; top:30%; font-size:3.5rem; transform:rotate(-15deg); }
        .flower-right { position:absolute; right:-20px; bottom:25%; font-size:3.8rem; transform:rotate(20deg); }
        .paper-content { position:relative; z-index:5; text-align:center; }
        .cute-header { font-size:3rem; color:#d43f75; text-shadow:2px 2px 0 #ffd1df; }
        .love-note { background:#fff2f7; border-radius:60px; padding:1.5rem; font-size:1.2rem; color:#7f3252; border:4px dotted #ff94b2; margin:1.8rem 0; }
        .signature { font-size:2rem; color:#b33b66; margin-top:20px; }
        .small-note { font-size:1.2rem; color:#b8587a; margin-top:1rem; }

        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div class="stage" id="app">
        <!-- GAME 1 : moving hearts (contained) -->
        <div id="gamePanel" class="game-panel">
            <div class="game-header"><span>‚ú® catch 5 flying hearts ‚ú®</span><div class="counter-box"><span>‚ù§Ô∏è</span><span id="heartCount">0</span>/5</div></div>
            <div id="movingArea" class="moving-area"></div>
            <div id="gameMessage" class="game-message">tap the floating hearts! üíì</div>
            <button id="surpriseBtn" class="surprise-btn" disabled>üî∏ open surprise üî∏</button>
        </div>

        <!-- GAME 2 : memory with photos 1.jpg ... 6.jpg -->
        <div id="memoryPanel" class="memory-panel hidden">
            <div class="memory-header">üíï game 2 ¬∑ match our pictures üíï</div>
            <div id="memoryGrid" class="memory-grid"></div>
            <div id="memoryMessage" class="memory-message">find the matching pairs (1&2, 3&4, 5&6)</div>
            <button id="backToSurpriseBtn" class="back-to-surprise-btn" disabled>üîí memory not finished</button>
        </div>

        <!-- RING BOX -->
        <div id="ringBox" class="ring-box hidden">
            <div class="ring-content"><span class="ring-emoji">üíç</span><span class="ring-label">open me</span></div>
        </div>

        <!-- PROPOSAL CARD -->
        <div id="proposalCard" class="proposal-card hidden">
            <div class="question-big"><span>üíû</span> Will you be my girlfriend? <span>üíû</span></div>
            <div class="heart-message"><p>üíå I know it's too sudden..</p>
              <p>but I want our relationship to grow, and I don't want to stay in this kind of setup where we don't even know what our relationship really is. This is very important to me, that's why I want to ask you, babyyy ‚ù§Ô∏è</p>
            </div>
            <div class="button-pair"><button class="yes-btn" id="yesBtn">YES üíñ</button><button class="no-btn" id="noBtn">no üíî</button></div>
        </div>

        <!-- YES PAPER -->
        <div id="yesPaper" class="yes-paper hidden">
            <div class="decorations">
              <span class="flower-left">üå∏üåºüå∏</span>
              <span class="flower-right">üå∫üå∑üå∫</span>
            </div>
            <div class="paper-content">
              <div class="cute-header">üíò YAAAAAY! üíò</div>
              <div class="love-note">ü•∞
                <br>you just made me the happiest!<br>‚ù§Ô∏è üåπ ‚ù§Ô∏è<br>I can't wait to build something beautiful together babyy. I want to know more about you mahal and syempre gusto kong mag level up yung relationship natin and to be become official with you mahal ko, You are very special to me po and I will cherish every moment together with you. <br> Mahal na mahal kita and I always will you are one that I need, the one that I love, and the one I want to spend my life with for the rest of my life. <br> Thank you so much mahal ko and I really appreciate you in every way, and love you unconditionally.</div>
                <div class="signature">üíó yours truly üíó</div>
                <div class="small-note">(I love you so much and this is a thousand kisses for my babyy üíãüíãüíã)</div>
              </div>
        </div>
    </div>

    <script>
        (function() {
            // ----- DOM elements -----
            const gamePanel = document.getElementById('gamePanel');
            const memoryPanel = document.getElementById('memoryPanel');
            const ringBox = document.getElementById('ringBox');
            const proposalCard = document.getElementById('proposalCard');
            const yesPaper = document.getElementById('yesPaper');
            const movingArea = document.getElementById('movingArea');
            const heartCountSpan = document.getElementById('heartCount');
            const gameMessage = document.getElementById('gameMessage');
            const surpriseBtn = document.getElementById('surpriseBtn');
            const memoryGrid = document.getElementById('memoryGrid');
            const memoryMessage = document.getElementById('memoryMessage');
            const backToSurpriseBtn = document.getElementById('backToSurpriseBtn');
            const yesBtn = document.getElementById('yesBtn');
            const noBtn = document.getElementById('noBtn');

            // ----- GAME 1 state (contained hearts) -----
            let collected = 0;
            const maxHearts = 5;
            let heartElements = [];
            let animationInterval = null;

            // ----- GAME 2 (memory) state -----
            // we create 3 pairs: (1.jpg & 2.jpg), (3.jpg & 4.jpg), (5.jpg & 6.jpg)
            const imagePairs = [
                { pairId: 0, img1: '1.jpg', img2: '2.jpg' },
                { pairId: 1, img1: '3.jpg', img2: '4.jpg' },
                { pairId: 2, img1: '5.jpg', img2: '6.jpg' }
            ];
            let cards = [];          // will hold { pairId, imgSrc, matched, element }
            let flippedIndices = [];
            let lockBoard = false;
            let matchedPairs = 0;
            const totalPairs = 3;

            // ----- HELPER: confetti -----
            function createConfetti(count) {
                for (let i = 0; i < count; i++) {
                    let heart = document.createElement('span');
                    heart.innerHTML = '‚ù§Ô∏è‚Äçüî•';
                    heart.style.position = 'fixed';
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.top = Math.random() * 100 + '%';
                    heart.style.fontSize = (2 + Math.random() * 3) + 'rem';
                    heart.style.pointerEvents = 'none';
                    heart.style.zIndex = '9999';
                    heart.style.animation = `floatAway 2s ease-out forwards`;
                    document.body.appendChild(heart);
                    setTimeout(() => heart.remove(), 2000);
                }
            }
            const styleSheet = document.createElement("style");
            styleSheet.textContent = `@keyframes floatAway { 0% { transform:translateY(0) scale(1); opacity:1; } 100% { transform:translateY(-150px) scale(1.5); opacity:0; } }`;
            document.head.appendChild(styleSheet);

            // ----- GAME 1: moving hearts (CONTAINED) -----
            function createMovingHearts() {
                movingArea.innerHTML = '';
                heartElements = [];
                const containerWidth = movingArea.clientWidth;
                const containerHeight = movingArea.clientHeight;
                for (let i = 0; i < 8; i++) {
                    const heart = document.createElement('div');
                    heart.className = 'moving-heart';
                    heart.textContent = 'üíñ';
                    heart.setAttribute('data-caught', 'false');
                    
                    // random start within container (avoid edges)
                    let left = 20 + Math.random() * (containerWidth - 100);
                    let top = 20 + Math.random() * (containerHeight - 100);
                    heart.style.left = left + 'px';
                    heart.style.top = top + 'px';

                    // store velocity or keyframe movement? simpler: use transform animation relative to itself
                    // but we want floating around inside container -> use keyframes with translate that keeps inside
                    // we compute random delta that stays within boundaries
                    const xMove = (Math.random() * 60 - 30); // max shift 30px
                    const yMove = (Math.random() * 50 - 25);
                    const duration = 3 + Math.random() * 4;
                    const delay = Math.random() * 2;
                    
                    // define keyframes unique for each heart
                    const style = document.createElement('style');
                    style.innerHTML = `
                        @keyframes floatHeart${i} {
                            0% { transform: translate(0, 0); }
                            100% { transform: translate(${xMove}px, ${yMove}px); }
                        }
                    `;
                    document.head.appendChild(style);
                    
                    heart.style.animation = `floatHeart${i} ${duration}s infinite alternate ease-in-out ${delay}s`;
                    
                    heart.addEventListener('click', heartClickHandler);
                    movingArea.appendChild(heart);
                    heartElements.push(heart);
                }
            }

            function heartClickHandler(e) {
                const heart = e.currentTarget;
                if (heart.getAttribute('data-caught') === 'true' || collected >= maxHearts) return;
                heart.setAttribute('data-caught', 'true');
                heart.classList.add('caught');
                heart.textContent = 'üíò';
                collected++;
                heartCountSpan.innerText = collected;
                if (collected === 1) gameMessage.innerText = 'üíû one! keep going!';
                else if (collected === 2) gameMessage.innerText = 'üå∏ two!';
                else if (collected === 3) gameMessage.innerText = 'üíì three!';
                else if (collected === 4) gameMessage.innerText = '‚ú® one more!';
                else if (collected === 5) {
                    gameMessage.innerText = 'üéâ You have completed the game now you can click the "open surprise"!';
                    surpriseBtn.disabled = false;
                }
            }

            // ----- SURPRISE BUTTON: show memory panel -----
            function openSurprise() {
                if (collected < maxHearts) return;
                gamePanel.classList.add('hidden');
                memoryPanel.classList.remove('hidden');
                initMemoryGame();
                createConfetti(4);
            }

            // ----- MEMORY GAME init (with images 1.jpg .. 6.jpg, paired) -----
            function initMemoryGame() {
                // build deck: 6 cards with specific pairs
                let deck = [
                    { pairId: 0, imgSrc: '1.jpg', matched: false },
                    { pairId: 0, imgSrc: '2.jpg', matched: false },
                    { pairId: 1, imgSrc: '3.jpg', matched: false },
                    { pairId: 1, imgSrc: '4.jpg', matched: false },
                    { pairId: 2, imgSrc: '5.jpg', matched: false },
                    { pairId: 2, imgSrc: '6.jpg', matched: false }
                ];
                // shuffle
                deck.sort(() => Math.random() - 0.5);
                cards = deck;
                matchedPairs = 0;
                flippedIndices = [];
                lockBoard = false;
                memoryMessage.innerText = 'Find the matching pairs';
                backToSurpriseBtn.disabled = true;
                backToSurpriseBtn.textContent = 'üîí memory not finished';
                renderMemoryBoard();
            }

            function renderMemoryBoard() {
                memoryGrid.innerHTML = '';
                cards.forEach((card, index) => {
                    const cardDiv = document.createElement('div');
                    cardDiv.className = 'card';
                    if (card.matched) cardDiv.classList.add('matched');
                    cardDiv.setAttribute('data-index', index);
                    
                    // card back simple
                    const cardBack = document.createElement('div');
                    cardBack.className = 'card-back';
                    cardBack.textContent = '‚ùì';
                    
                    // card front with image
                    const cardFront = document.createElement('div');
                    cardFront.className = 'card-front';
                    const img = document.createElement('img');
                    img.src = card.imgSrc;
                    img.alt = 'couple pic';
                    // if image fails to load, show text fallback
                    img.onerror = () => { img.style.display = 'none'; cardFront.textContent = '‚ù§Ô∏è'; };
                    cardFront.appendChild(img);
                    
                    cardDiv.appendChild(cardBack);
                    cardDiv.appendChild(cardFront);
                    
                    cardDiv.addEventListener('click', () => handleCardClick(index));
                    memoryGrid.appendChild(cardDiv);
                });
            }

            function handleCardClick(index) {
                if (lockBoard) return;
                if (cards[index].matched) return;
                if (flippedIndices.includes(index)) return;
                if (flippedIndices.length === 2) return;

                const cardDiv = memoryGrid.children[index];
                cardDiv.classList.add('flipped');
                flippedIndices.push(index);

                if (flippedIndices.length === 2) {
                    lockBoard = true;
                    const idx1 = flippedIndices[0];
                    const idx2 = flippedIndices[1];
                    const card1 = cards[idx1];
                    const card2 = cards[idx2];

                    if (card1.pairId === card2.pairId) {  // correct pair (1&2,3&4,5&6)
                        cards[idx1].matched = true;
                        cards[idx2].matched = true;
                        matchedPairs++;
                        memoryMessage.innerText = `pair matched! (${matchedPairs}/3)`;
                        setTimeout(() => {
                            memoryGrid.children[idx1].classList.add('matched');
                            memoryGrid.children[idx2].classList.add('matched');
                            flippedIndices = [];
                            lockBoard = false;
                            if (matchedPairs === totalPairs) {
                                memoryMessage.innerText = 'üéâ all pairs found! click below!';
                                backToSurpriseBtn.disabled = false;
                                backToSurpriseBtn.textContent = 'üéâ open surprise üéâ';
                                createConfetti(6);
                            }
                        }, 500);
                    } else {
                        memoryMessage.innerText = 'not a match, try again';
                        setTimeout(() => {
                            memoryGrid.children[idx1].classList.remove('flipped');
                            memoryGrid.children[idx2].classList.remove('flipped');
                            flippedIndices = [];
                            lockBoard = false;
                        }, 800);
                    }
                }
            }

            // ----- BACK TO SURPRISE (after memory) -> show ring box -----
            function backToSurpriseFinal() {
                if (matchedPairs < totalPairs) return;
                memoryPanel.classList.add('hidden');
                ringBox.classList.remove('hidden');
                createConfetti(6);
            }

            // ----- RING CLICK -> proposal -----
            function openProposal() {
                ringBox.classList.add('hidden');
                proposalCard.classList.remove('hidden');
                createConfetti(5);
            }

            // ----- YES / NO -----
            function handleYes() {
                proposalCard.classList.add('hidden');
                yesPaper.classList.remove('hidden');
                createConfetti(12);
            }

            function handleNo(e) {
                e.stopPropagation();
                const btn = e.currentTarget;
                const maxX = window.innerWidth - btn.offsetWidth - 40;
                const maxY = window.innerHeight - btn.offsetHeight - 40;
                let newX = Math.min(Math.max(20, Math.random() * maxX), maxX);
                let newY = Math.min(Math.max(20, Math.random() * maxY), maxY);
                btn.style.position = 'fixed';
                btn.style.left = newX + 'px';
                btn.style.top = newY + 'px';
                btn.style.zIndex = '9999';
                btn.textContent = 'üíî no? üíî';
                setTimeout(() => {
                    btn.style.position = 'relative';
                    btn.style.left = 'auto';
                    btn.style.top = 'auto';
                    btn.textContent = 'no üíî';
                }, 2000);
                const msg = document.createElement('div');
                msg.textContent = 'please try again, sweetie? üíï';
                msg.style.position = 'fixed';
                msg.style.bottom = '20px';
                msg.style.left = '50%';
                msg.style.transform = 'translateX(-50%)';
                msg.style.background = '#ffd0df';
                msg.style.padding = '0.7rem 2rem';
                msg.style.borderRadius = '60px';
                msg.style.boxShadow = '0 5px 10px pink';
                msg.style.fontWeight = 'bold';
                msg.style.color = '#a1305c';
                msg.style.zIndex = '10000';
                msg.style.border = '2px solid white';
                document.body.appendChild(msg);
                setTimeout(() => msg.remove(), 2000);
            }

            // reset if double click yesPaper (optional)
            yesPaper.addEventListener('dblclick', function() {
                collected = 0;
                heartCountSpan.innerText = '0';
                surpriseBtn.disabled = true;
                gameMessage.innerText = 'tap the floating hearts! üíì';
                gamePanel.classList.remove('hidden');
                memoryPanel.classList.add('hidden');
                ringBox.classList.add('hidden');
                proposalCard.classList.add('hidden');
                yesPaper.classList.add('hidden');
                createMovingHearts();  // fresh hearts
                if (noBtn.style.position === 'fixed') {
                    noBtn.style.position = 'relative';
                    noBtn.textContent = 'no üíî';
                }
            });

            // attach listeners
            surpriseBtn.addEventListener('click', openSurprise);
            backToSurpriseBtn.addEventListener('click', backToSurpriseFinal);
            ringBox.addEventListener('click', openProposal);
            yesBtn.addEventListener('click', handleYes);
            noBtn.addEventListener('click', handleNo);

            // start game 1
            createMovingHearts();

            // ensure hearts reposition on window resize? keep simple, but we can reinit on resize to avoid edges
            window.addEventListener('resize', () => {
                // preserve game state but reset positions? easier: recreate hearts
                if (!gamePanel.classList.contains('hidden')) {
                    createMovingHearts();
                }
            });
        })();
    </script>
</body>
</html>
